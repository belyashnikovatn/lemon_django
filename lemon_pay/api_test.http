### üîë –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
POST http://localhost:8000/api/login/
Content-Type: application/json

{
  "username": "bun",
  "password": "bun123"
}

### üßæ –°–æ–∑–¥–∞–Ω–∏–µ checkout (—á–µ—Ä–µ–∑ API Lemon Squeezy –Ω–∞–ø—Ä—è–º—É—é, –Ω–µ Django)
# ‚ö†Ô∏è –ó–∞–ø—Ä–æ—Å –Ω–∞–ø—Ä—è–º—É—é –∫ https://api.lemonsqueezy.com ‚Äî –¥–ª—è —Ç–µ—Å—Ç–æ–≤ API-–∫–ª—é—á–æ–º
POST https://api.lemonsqueezy.com/v1/checkouts
Content-Type: application/vnd.api+json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzQ1NDY3NjY5LCJpYXQiOjE3NDU0NjQwNjksImp0aSI6ImI0NjAyMGZmNGEwZDQyYjViNWJhMTc2MmQ2MThkZDY1IiwidXNlcl9pZCI6NX0.YOopl880CX1gvjZ76VBIfUkD2CGD4Ph7123Eai4lJFE


{
  "data": {
    "type": "checkouts",
    "attributes": {
      "checkout_data": {
        "email": "bun@example.com",
        "custom": {
          "user_id": "5"
        }
      },
      "product_options": {
        "enabled_variants": [772403],
        "redirect_url": "https://yoursite.com/thank-you",
        "receipt_link_url": "https://yoursite.com/receipt",
        "receipt_thank_you_note": "Thank you for your purchase!"
      }
    },
    "relationships": {
      "store": {
        "data": {
          "type": "stores",
          "id": "172964"
        }
      },
      "variant": {
        "data": {
          "type": "variants",
          "id": "772403"
        }
      }
    }
  }
}

### üßæ –°–æ–∑–¥–∞–Ω–∏–µ checkout —á–µ—Ä–µ–∑ Django (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å backend endpoint)
# ‚ö†Ô∏è –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç Bearer —Ç–æ–∫–µ–Ω–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
POST http://localhost:8000/api/create-checkout/
Content-Type: application/json
Authorization: Bearer not-needed-here

{}

### üö® Webhook –æ—Ç Lemon Squeezy (–ø–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞)
# ‚ö†Ô∏è –î–ª—è —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ ngrok: —É–±–µ–¥–∏—Å—å, —á—Ç–æ Lemon –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ –≤–Ω–µ—à–Ω–∏–π URL –≤–∏–¥–∞:
# https://<—Ç–≤–æ–π-ngrok-—Å–∞–±–¥–æ–º–µ–Ω>.ngrok.io/api/lemon-webhook/
POST http://localhost:8000/api/lemon-webhook/
Content-Type: application/json
X-Signature: {{valid_signature}}

{
  "meta": {
    "event_name": "subscription_created"
  },
  "data": {
    "id": "sub_test_123",
    "attributes": {
      "customer_id": "cust_test_456",
      "custom_data": {
        "user_id": 5
      }
    }
  }
}

### ‚õî Webhook: –æ—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏
POST http://localhost:8000/api/lemon-webhook/
Content-Type: application/json
X-Signature: {{valid_signature}}

{
  "meta": {
    "event_name": "subscription_cancelled"
  },
  "data": {
    "id": "sub_test_123",
    "attributes": {
      "customer_id": "cust_test_456",
      "custom_data": {
        "user_id": 5
      }
    }
  }
}

### üë§ –ú–æ—è –ø–æ–¥–ø–∏—Å–∫–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞)
GET http://localhost:8000/api/my-subscription/
Authorization: Bearer {{access_token}}

### üíé –ü—Ä–µ–º–∏—É–º –∫–æ–Ω—Ç–µ–Ω—Ç
GET http://localhost:8000/api/premium/
Authorization: Bearer {{access_token}}

### üìä –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET http://localhost:8000/api/subscription-status/5/
